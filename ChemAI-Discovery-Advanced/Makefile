# ChemAI Discovery - Advanced Makefile
# Simplify development and deployment

.PHONY: help install install-full setup run test clean docker deploy

help:
	@echo "ğŸ§¬ ChemAI Discovery - Advanced Drug Discovery Platform"
	@echo ""
	@echo "Available commands:"
	@echo "  install      - Install basic requirements"
	@echo "  install-full - Install all requirements including optional"
	@echo "  setup        - Complete project setup"
	@echo "  run          - Run the platform"
	@echo "  test         - Run tests"
	@echo "  clean        - Clean up generated files"
	@echo "  docker       - Build and run Docker container"
	@echo "  deploy       - Deploy to production"

install:
	@echo "ğŸ“¦ Installing basic requirements..."
	pip install -r requirements.txt
	@echo "âœ… Basic installation complete!"

install-full:
	@echo "ğŸ“¦ Installing full requirements..."
	pip install -r requirements.txt
	# Optional: Uncomment to install RDKit
	# pip install rdkit-pypi
	@echo "âœ… Full installation complete!"

setup: install-full
	@echo "ğŸ—ï¸ Setting up ChemAI Discovery..."
	mkdir -p logs data/molecules models/pretrained
	@echo "âœ… Setup complete!"

run:
	@echo "ğŸš€ Starting ChemAI Discovery Platform..."
	python src/main.py

test:
	@echo "ğŸ§ª Running tests..."
	pytest tests/ -v

clean:
	@echo "ğŸ§¹ Cleaning up..."
	find . -type f -name "*.pyc" -delete
	find . -type d -name "__pycache__" -delete
	rm -rf .pytest_cache/
	rm -rf logs/*.log
	@echo "âœ… Cleanup complete!"

docker:
	@echo "ğŸ³ Building and running Docker container..."
	docker-compose -f deployment/docker/docker-compose.yml up --build

deploy:
	@echo "ğŸš€ Deploying to production..."
	@echo "Please configure your deployment target first!"

dev:
	@echo "ğŸ”§ Starting development server..."
	uvicorn src.main:app --reload --host 0.0.0.0 --port 8000

format:
	@echo "ğŸ¨ Formatting code..."
	black src/ tests/
	@echo "âœ… Code formatted!"

lint:
	@echo "ğŸ” Linting code..."
	flake8 src/ tests/
	mypy src/
	@echo "âœ… Linting complete!"

benchmark:
	@echo "âš¡ Running performance benchmarks..."
	python scripts/benchmark.py
	@echo "âœ… Benchmarks complete!"

demo:
	@echo "ğŸ¬ Running demo..."
	python scripts/demo.py
	@echo "âœ… Demo complete!"
